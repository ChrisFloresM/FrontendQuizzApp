<!DOCTYPE html>
<html lang="es">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>Sistema de Temas Escalable</title>
		<style>
			/* ===== VARIABLES CSS PERSONALIZADAS ===== */
			:root {
				/* Colores del tema claro */
				--bg-primary: #ffffff;
				--bg-secondary: #f8f9fa;
				--bg-tertiary: #e9ecef;
				--text-primary: #212529;
				--text-secondary: #6c757d;
				--text-muted: #adb5bd;
				--border: #dee2e6;
				--accent: #007bff;
				--accent-hover: #0056b3;
				--success: #28a745;
				--warning: #ffc107;
				--error: #dc3545;
				--shadow: rgba(0, 0, 0, 0.1);
				--card-shadow: 0 2px 4px var(--shadow);

				/* Transiciones suaves */
				--transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
			}

			/* Tema oscuro con data attribute */
			[data-theme="dark"] {
				--bg-primary: #1a1a1a;
				--bg-secondary: #2d2d2d;
				--bg-tertiary: #404040;
				--text-primary: #ffffff;
				--text-secondary: #b3b3b3;
				--text-muted: #808080;
				--border: #404040;
				--accent: #4dabf7;
				--accent-hover: #339af0;
				--success: #51cf66;
				--warning: #ffd43b;
				--error: #ff6b6b;
				--shadow: rgba(0, 0, 0, 0.3);
				--card-shadow: 0 4px 8px var(--shadow);
			}

			/* ===== RESET Y BASE ===== */
			* {
				margin: 0;
				padding: 0;
				box-sizing: border-box;
			}

			html {
				font-size: 16px;
				scroll-behavior: smooth;
			}

			body {
				font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
				background-color: var(--bg-primary);
				color: var(--text-primary);
				transition: var(--transition);
				line-height: 1.6;
			}

			/* ===== COMPONENTES REUTILIZABLES ===== */
			.container {
				max-width: 1200px;
				margin: 0 auto;
				padding: 2rem;
			}

			.card {
				background: var(--bg-secondary);
				border: 1px solid var(--border);
				border-radius: 12px;
				padding: 1.5rem;
				margin: 1rem 0;
				box-shadow: var(--card-shadow);
				transition: var(--transition);
			}

			.card:hover {
				transform: translateY(-2px);
				box-shadow: 0 8px 16px var(--shadow);
			}

			.btn {
				background: var(--accent);
				color: white;
				border: none;
				padding: 0.75rem 1.5rem;
				border-radius: 8px;
				cursor: pointer;
				font-weight: 500;
				transition: var(--transition);
				font-size: 0.9rem;
			}

			.btn:hover {
				background: var(--accent-hover);
				transform: translateY(-1px);
			}

			.btn-secondary {
				background: var(--bg-tertiary);
				color: var(--text-primary);
			}

			.btn-secondary:hover {
				background: var(--border);
			}

			/* ===== THEME TOGGLE ===== */
			.theme-toggle {
				position: fixed;
				top: 2rem;
				right: 2rem;
				background: var(--bg-secondary);
				border: 2px solid var(--border);
				border-radius: 50px;
				padding: 0.5rem;
				cursor: pointer;
				transition: var(--transition);
				display: flex;
				align-items: center;
				gap: 0.5rem;
				z-index: 1000;
			}

			.theme-toggle:hover {
				border-color: var(--accent);
				box-shadow: var(--card-shadow);
			}

			.theme-icon {
				width: 24px;
				height: 24px;
				transition: var(--transition);
			}

			.theme-icon.hidden {
				opacity: 0;
				transform: rotate(180deg);
			}

			/* ===== LAYOUT EXAMPLES ===== */
			.header {
				background: var(--bg-secondary);
				border-bottom: 1px solid var(--border);
				padding: 1rem 0;
			}

			.nav {
				display: flex;
				justify-content: space-between;
				align-items: center;
			}

			.logo {
				font-size: 1.5rem;
				font-weight: bold;
				color: var(--accent);
			}

			.nav-links {
				display: flex;
				gap: 2rem;
				list-style: none;
			}

			.nav-link {
				color: var(--text-secondary);
				text-decoration: none;
				transition: var(--transition);
			}

			.nav-link:hover {
				color: var(--text-primary);
			}

			.grid {
				display: grid;
				grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
				gap: 1.5rem;
				margin: 2rem 0;
			}

			.status-badge {
				display: inline-block;
				padding: 0.25rem 0.75rem;
				border-radius: 20px;
				font-size: 0.8rem;
				font-weight: 500;
			}

			.status-success {
				background: rgba(40, 167, 69, 0.1);
				color: var(--success);
				border: 1px solid var(--success);
			}

			.status-warning {
				background: rgba(255, 193, 7, 0.1);
				color: var(--warning);
				border: 1px solid var(--warning);
			}

			.status-error {
				background: rgba(220, 53, 69, 0.1);
				color: var(--error);
				border: 1px solid var(--error);
			}

			/* ===== RESPONSIVE ===== */
			@media (max-width: 768px) {
				.container {
					padding: 1rem;
				}

				.nav {
					flex-direction: column;
					gap: 1rem;
				}

				.nav-links {
					gap: 1rem;
				}

				.theme-toggle {
					top: 1rem;
					right: 1rem;
				}
			}

			/* ===== PREFERENCIAS DEL SISTEMA ===== */
			@media (prefers-color-scheme: dark) {
				:root:not([data-theme]) {
					--bg-primary: #1a1a1a;
					--bg-secondary: #2d2d2d;
					--bg-tertiary: #404040;
					--text-primary: #ffffff;
					--text-secondary: #b3b3b3;
					--text-muted: #808080;
					--border: #404040;
					--accent: #4dabf7;
					--accent-hover: #339af0;
					--success: #51cf66;
					--warning: #ffd43b;
					--error: #ff6b6b;
					--shadow: rgba(0, 0, 0, 0.3);
					--card-shadow: 0 4px 8px var(--shadow);
				}
			}
		</style>
	</head>
	<body>
		<!-- Theme Toggle Button -->
		<button class="theme-toggle" id="themeToggle" aria-label="Cambiar tema">
			<svg class="theme-icon" id="sunIcon" fill="var(--text-primary)" viewBox="0 0 24 24">
				<path d="M12 18a6 6 0 100-12 6 6 0 000 12zM12 2v2m0 16v2m8.66-10h-2M5.34 12h-2m15.66 6.66l-1.42-1.42M6.76 6.76L5.34 5.34m12.32 0l-1.42 1.42M6.76 17.24l-1.42 1.42"/>
			</svg>
			<svg class="theme-icon hidden" id="moonIcon" fill="var(--text-primary)" viewBox="0 0 24 24">
				<path d="M21 12.79A9 9 0 1111.21 3a7 7 0 009.79 9.79z"/>
			</svg>
		</button>

		<!-- Header -->
		<header class="header">
			<div class="container">
				<nav class="nav">
					<div class="logo">MiApp</div>
					<ul class="nav-links">
						<li><a href="#" class="nav-link">Inicio</a></li>
						<li><a href="#" class="nav-link">Productos</a></li>
						<li><a href="#" class="nav-link">Contacto</a></li>
					</ul>
				</nav>
			</div>
		</header>

		<!-- Main Content -->
		<main class="container">
			<h1>Sistema de Temas Escalable</h1>
			<p>Este ejemplo demuestra un sistema de temas light/dark completamente escalable usando CSS variables y JavaScript.</p>

			<!-- Cards Grid -->
			<div class="grid">
				<div class="card">
					<h3>Características Principales</h3>
					<ul style="margin: 1rem 0; padding-left: 1.5rem;">
						<li>Variables CSS para fácil mantenimiento</li>
						<li>Respeta preferencias del sistema</li>
						<li>Transiciones suaves</li>
						<li>Almacenamiento de preferencias</li>
					</ul>
					<button class="btn">Ver más</button>
				</div>

				<div class="card">
					<h3>Estados del Sistema</h3>
					<div style="margin: 1rem 0;">
						<span class="status-badge status-success">Activo</span>
						<span class="status-badge status-warning">Pendiente</span>
						<span class="status-badge status-error">Error</span>
					</div>
					<p>Los colores se adaptan automáticamente al tema seleccionado.</p>
					<button class="btn btn-secondary">Configurar</button>
				</div>

				<div class="card">
					<h3>Componentes Reutilizables</h3>
					<p>Todos los componentes usan las variables CSS definidas, garantizando consistencia en toda la aplicación.</p>
					<div style="margin-top: 1rem;">
						<button class="btn" style="margin-right: 0.5rem;">Primario</button>
						<button class="btn btn-secondary">Secundario</button>
					</div>
				</div>
			</div>

			<div class="card">
				<h2>Implementación</h2>
				<p><strong>CSS:</strong> Usa variables CSS personalizadas en :root para definir todos los colores y propiedades del tema.</p>
				<p><strong>JavaScript:</strong> Maneja el cambio de tema y persistencia de preferencias del usuario.</p>
				<p><strong>Escalabilidad:</strong> Agregar nuevos componentes es simple - solo usa las variables CSS existentes.</p>
			</div>
		</main>

		<script>
			// ===== SISTEMA DE TEMAS ESCALABLE =====
			class ThemeManager {
				constructor() {
					this.init();
				}

				init() {
					this.loadTheme();
					this.bindEvents();
					this.updateIcons();
				}

				// Cargar tema guardado o detectar preferencia del sistema
				loadTheme() {
					const savedTheme = this.getSavedTheme();
					const systemTheme = this.getSystemTheme();
					const theme = savedTheme || systemTheme;

					this.setTheme(theme);
				}

				// Obtener tema guardado del localStorage
				getSavedTheme() {
					try {
						return localStorage.getItem('theme');
					} catch (e) {
						return null; // localStorage no disponible
					}
				}

				// Detectar preferencia del sistema
				getSystemTheme() {
					if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
						return 'dark';
					}
					return 'light';
				}

				// Aplicar tema
				setTheme(theme) {
					if (theme === 'dark') {
						document.documentElement.setAttribute('data-theme', 'dark');
					} else {
						document.documentElement.removeAttribute('data-theme');
					}

					this.saveTheme(theme);
					this.updateIcons();

					// Opcional: Disparar evento personalizado
					window.dispatchEvent(new CustomEvent('themeChange', { detail: { theme } }));
				}

				// Guardar tema en localStorage
				saveTheme(theme) {
					try {
						localStorage.setItem('theme', theme);
					} catch (e) {
						console.warn('No se pudo guardar el tema');
					}
				}

				// Alternar entre temas
				toggleTheme() {
					const currentTheme = this.getCurrentTheme();
					const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
					this.setTheme(newTheme);
				}

				// Obtener tema actual
				getCurrentTheme() {
					return document.documentElement.getAttribute('data-theme') || 'light';
				}

				// Actualizar iconos del botón
				updateIcons() {
					const sunIcon = document.getElementById('sunIcon');
					const moonIcon = document.getElementById('moonIcon');
					const currentTheme = this.getCurrentTheme();

					if (currentTheme === 'dark') {
						sunIcon.classList.remove('hidden');
						moonIcon.classList.add('hidden');
					} else {
						sunIcon.classList.add('hidden');
						moonIcon.classList.remove('hidden');
					}
				}

				// Vincular eventos
				bindEvents() {
					const toggleButton = document.getElementById('themeToggle');
					toggleButton.addEventListener('click', () => {
						this.toggleTheme();
					});

					// Escuchar cambios en preferencias del sistema
					if (window.matchMedia) {
						window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', (e) => {
							// Solo cambiar si no hay tema guardado por el usuario
							if (!this.getSavedTheme()) {
								this.setTheme(e.matches ? 'dark' : 'light');
							}
						});
					}
				}

				// Método público para obtener todas las variables CSS del tema actual
				getThemeVariables() {
					const styles = getComputedStyle(document.documentElement);
					const themeVars = {};

					// Lista de variables CSS del tema
					const varNames = [
						'--bg-primary', '--bg-secondary', '--bg-tertiary',
						'--text-primary', '--text-secondary', '--text-muted',
						'--border', '--accent', '--accent-hover',
						'--success', '--warning', '--error', '--shadow'
					];

					varNames.forEach(name => {
						themeVars[name] = styles.getPropertyValue(name).trim();
					});

					return themeVars;
				}
			}

			// Inicializar el sistema de temas
			const themeManager = new ThemeManager();

			// Ejemplo de uso del evento personalizado
			window.addEventListener('themeChange', (e) => {
				console.log(`Tema cambiado a: ${e.detail.theme}`);
			});

			// Hacer disponible globalmente para debugging
			window.themeManager = themeManager;
		</script>
	</body>
</html>